# rtop v2.1 Features

## Overview

Version 2.1 is a major enhancement release that adds powerful interactive features, hardware monitoring, and improved user experience. This release focuses on making rtop more interactive and feature-complete.

## New Features

### 1. Mouse Support ðŸ–±ï¸

Full mouse interaction has been added:
- **Scroll**: Use mouse wheel to scroll through the process list
- **Click**: Click on a process to select it
- **Interactive**: All mouse interactions work seamlessly with keyboard navigation

**Technical**: Enabled crossterm's `event-stream` feature for mouse event handling.

### 2. Multi-Page Navigation ðŸ“„

Navigate between different monitoring views:
- **F2**: Overview page (default view with all panels)
- **F3**: Processes page (expanded process list)
- **F4**: Network page (detailed network statistics)
- **F5**: Storage page (disk and I/O details)

**Visual Feedback**: Current page displayed in header with F-key hints.

### 3. Process Scrolling & Navigation â¬†ï¸â¬‡ï¸

Enhanced process list navigation:
- **Arrow Keys** (â†‘â†“): Navigate one process at a time
- **Page Up/Down**: Scroll 10 processes at once
- **Home/End**: Jump to first/last process
- **Visual Indicators**: 
  - Selected process highlighted with `â–¶` marker
  - Scroll position shown as `[start-end/total]`
  - Row highlighting for better visibility

### 4. Process Kill Functionality âš ï¸

Safe process termination:
- **Press `k`**: Kill selected process
- **Confirmation Dialog**: Shows process PID and name
- **Y/N Prompt**: Requires explicit confirmation (Y) or cancel (any other key)
- **Visual Warning**: Red-bordered dialog with warning icon

**Safety**: Always requires user confirmation before killing a process.

### 5. Regex Process Filtering ðŸ”

Filter processes by pattern:
- **Press `/`**: Enter filter mode
- **Type Pattern**: Uses Rust regex syntax
- **Real-time**: Filtered list updates as you type
- **Visual Indicator**: Active filter shown in footer bar
- **Clear Filter**: Backspace to clear pattern

**Examples**:
- `/firefox` - Find Firefox processes
- `/^systemd` - Processes starting with "systemd"
- `/(chrome|firefox)` - Chrome or Firefox processes

### 6. Battery Monitoring ðŸ”‹

Comprehensive battery information:
- **Percentage**: Visual percentage display
- **Charging Status**: Icons show charging (âš¡) or discharging (ðŸ”‹)
- **Time Remaining**: Estimated time until full/empty
- **Color Coding**:
  - Green: >50%
  - Yellow: 20-50%
  - Red: <20%

**Display**: Shown in footer bar when battery detected.

### 7. Disk I/O Statistics ðŸ’¾

Monitor disk read/write activity:
- **Read/Write Bytes**: Per-second monitoring
- **Multiple Disks**: Track all system disks
- **Real-time Updates**: Continuous monitoring

**Implementation**: Uses Linux `/proc/diskstats` (placeholder for other systems).

## Enhanced UI Elements

### Header Enhancements
- Page indicator: `[Page: Overview - F2:Overview F3:Process F4:Net F5:Store]`
- Context-aware hints for current view

### Footer Enhancements
- Battery status: `ðŸ”‹ 85% âš¡` (when available)
- Active filter: `Filter: firefox` (when filtering)
- Load average and uptime (preserved from v2.0)

### Confirmation Dialogs
- Centered popup for process kill confirmation
- Clear visual warning with red border
- Explicit Y/N instructions

## Updated Keyboard Shortcuts

### Navigation
- **F1/h**: Toggle help
- **F2-F5**: Switch pages
- **Space**: Pause/Resume
- **r**: Force refresh
- **q/Esc**: Quit

### Process Management
- **â†‘â†“**: Navigate list
- **PgUp/PgDn**: Scroll page
- **Home/End**: Jump to start/end
- **k**: Kill process
- **/**: Filter processes

### Process Sorting (unchanged)
- **p**: Sort by PID
- **c**: Sort by CPU
- **m**: Sort by Memory

## Technical Implementation

### New Dependencies
```toml
regex = "1.10"           # Regex filtering
battery = "0.7"          # Battery monitoring
crossterm = { version = "0.28", features = ["event-stream"] }  # Mouse support
```

### New Modules
- `src/monitor/battery.rs`: Battery monitoring with state tracking
- `src/monitor/diskio.rs`: Disk I/O statistics (Linux-focused)

### Code Architecture
- **ViewPage Enum**: Page-based rendering system
- **Enhanced Input Handling**: Complex event processing for mouse, keyboard, and multi-key sequences
- **App State Extensions**: Added fields for scrolling, selection, filtering, mouse, battery, disk I/O
- **Dialog System**: Reusable centered popup helper for confirmations

### Performance
- No significant performance impact
- Mouse events processed efficiently
- Battery and disk I/O use appropriate refresh intervals
- Regex compilation cached when pattern doesn't change

## Testing

All features have been tested:
âœ… Mouse scrolling and clicking
âœ… Multi-page navigation with F-keys
âœ… Process scrolling with all navigation methods
âœ… Process kill with confirmation dialog
âœ… Regex filtering with various patterns
âœ… Battery display (when available)
âœ… Compilation and execution

## Documentation Updates

Updated files:
- **CHANGELOG.md**: Comprehensive v2.1 changelog
- **README.md**: New features in features section and keyboard shortcuts
- **Help Overlay**: All new shortcuts documented
- **This File**: Complete feature documentation

## Future Enhancements (Not in v2.1)

Potential future additions:
- GPU monitoring (NVIDIA/AMD)
- Docker container monitoring
- Historical data persistence
- Alerts and notifications
- Custom themes system
- Plugin architecture
- Remote monitoring
- Web dashboard interface

## Commit Information

**Commit**: 47cf958
**Branch**: master
**Pushed**: Yes
**Version**: 2.1.0

## Build & Installation

```bash
# Clone repository
git clone git@github.com:npequeux/mytop.git
cd mytop

# Build release binary
cargo build --release

# Binary location
./target/release/rtop

# Install globally
sudo cp target/release/rtop /usr/local/bin/
```

## Changelog Entry

See [CHANGELOG.md](CHANGELOG.md) for the full v2.1.0 changelog entry.

---

**Author**: GitHub Copilot  
**Date**: 2026-02-01  
**Version**: 2.1.0  
